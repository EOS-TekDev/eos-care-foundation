@import url('https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,400;0,9..144,500;0,9..144,600;1,9..144,400&family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Source+Sans+3:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --text-primary: 28 28 30;
    --text-secondary: 60 60 67;
    --text-tertiary: 107 114 128;
    --text-muted: 156 163 175;
    --text-disabled: 199 199 204;
  }

  .dark {
    color-scheme: dark;
    --text-primary: 249 250 251;
    --text-secondary: 229 231 235;
    --text-tertiary: 203 213 225;
    --text-muted: 148 163 184;
    --text-disabled: 100 116 139;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply font-body text-text-primary min-h-screen;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 400ms ease, color 300ms ease;
  }

  html.dark body {
    @apply text-white;
  }

  /* Clear gradient background in dark mode */
  html.dark .bg-eos-gradient {
    background-image: none;
  }

  /* Smooth transitions for theme-aware elements */
  .theme-transition,
  .card,
  .navbar,
  .mobile-nav,
  header,
  aside,
  main {
    transition: background-color 400ms ease, border-color 300ms ease, color 300ms ease;
  }

  /* Subtle noise texture overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1000;
    opacity: 0.015;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  }

  html.dark body::before {
    opacity: 0.05;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-display font-semibold text-text-primary;
  }

  ::selection {
    @apply bg-primary/20 text-text-primary;
  }

  html.dark ::selection {
    @apply bg-primary/40 text-white;
  }
}

@layer components {
  /* Button base */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98];
  }

  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] bg-primary text-white hover:bg-primary-hover hover:shadow-medium focus:ring-primary;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] bg-white/[0.85] backdrop-blur-[12px] text-text-primary border border-white/50 hover:bg-white hover:shadow-soft focus:ring-primary dark:bg-white/10 dark:hover:bg-white/20 dark:border-white/20;
  }

  .btn-cta {
    @apply inline-flex items-center justify-center gap-2 px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] bg-cta text-white shadow-medium hover:bg-cta-hover hover:shadow-strong focus:ring-cta;
  }

  .btn-cta:hover {
    box-shadow: 0 8px 32px rgba(255, 107, 53, 0.3);
  }

  .btn-outline {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] border-2 border-primary text-primary bg-transparent hover:bg-primary hover:text-white focus:ring-primary;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] text-primary bg-transparent hover:bg-primary-light focus:ring-primary;
  }

  /* Card variants */
  .card {
    @apply bg-white/[0.85] backdrop-blur-[12px] rounded-2xl shadow-soft border border-white/50 p-6 dark:bg-white/10 dark:border-white/10;
  }

  .card-interactive {
    @apply card cursor-pointer transition-all duration-200 hover:-translate-y-0.5 hover:shadow-medium;
  }

  .card-solid {
    @apply bg-white rounded-2xl shadow-soft border border-gray-100 p-6 dark:bg-ink/80 dark:border-white/10;
  }

  /* Navigation */
  .navbar {
    @apply sticky top-0 z-50 bg-white/[0.88] backdrop-blur-[12px] border-b border-white/50 dark:bg-ink/90 dark:border-white/10;
  }

  .nav-link {
    @apply text-text-secondary hover:text-primary transition-colors duration-200 font-medium;
  }

  .nav-link-active {
    @apply text-primary font-semibold;
  }

  /* Mobile bottom nav */
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 z-50 bg-white/[0.88] backdrop-blur-[12px] border-t border-white/50 h-16;
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .mobile-nav-item {
    @apply flex flex-col items-center justify-center gap-1 text-xs text-text-muted transition-colors;
  }

  .mobile-nav-item-active {
    @apply text-primary;
  }

  /* Floating donate button */
  .floating-donate {
    @apply -mt-6 w-14 h-14 rounded-full bg-cta text-white shadow-strong flex items-center justify-center transition-transform hover:scale-105;
  }

  /* Text utilities */
  .text-balance {
    text-wrap: balance;
  }

  .link {
    @apply text-primary hover:text-primary-hover underline underline-offset-2 transition-colors;
  }

  /* Section containers */
  .section {
    @apply py-16 md:py-24;
  }

  .section-tight {
    @apply py-8 md:py-12;
  }

  .container-narrow {
    @apply max-w-3xl mx-auto px-4 sm:px-6;
  }

  .container-wide {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Form inputs */
  .input {
    @apply w-full px-4 py-3 rounded-xl bg-white/[0.85] backdrop-blur-[12px] border border-white/50 text-text-primary placeholder:text-text-muted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all dark:bg-white/10 dark:border-white/20;
  }

  .input-error {
    @apply border-status-urgent focus:ring-status-urgent;
  }

  .label {
    @apply block text-sm font-medium text-text-secondary mb-2;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  }

  .badge-primary {
    @apply badge bg-primary-light text-primary;
  }

  .badge-success {
    @apply badge bg-green-100 text-status-success;
  }

  .badge-warning {
    @apply badge bg-orange-100 text-status-warning;
  }

  .badge-urgent {
    @apply badge bg-red-100 text-status-urgent;
  }

  /* Progress bar */
  .progress-bar {
    @apply h-2 bg-gray-200 rounded-full overflow-hidden;
  }

  .progress-fill {
    @apply h-full bg-primary rounded-full transition-all duration-500;
  }

  /* Skeleton loading */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded;
  }
}

@layer utilities {
  .delay-100 { animation-delay: 100ms; }
  .delay-200 { animation-delay: 200ms; }
  .delay-300 { animation-delay: 300ms; }
  .delay-400 { animation-delay: 400ms; }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
